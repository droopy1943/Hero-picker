<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Marvel Rivals Hero Overlay</title>
<style>
  body {
    margin: 0;
    background: rgba(0,0,0,0);
    overflow: hidden;
  }

  .overlay {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }

  .char-wrapper {
    position: relative;
    display: inline-block;
    width: calc(400px * 1.05);
    height: calc(250px * 1.05);
    margin: 0 auto;
    overflow: visible;
  }

  #charImg {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
    position: relative;
    z-index: 1;
    transition: all 0.4s ease;
  }

  #charImg.default-placeholder {
    opacity: 0.5;
    filter: grayscale(40%) brightness(0.9);
    transform: scale(0.85);
  }

  #borderImg {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-52%, -52%) rotate(3deg);
    width: 135%;
    height: 138%;
    z-index: 2;
    pointer-events: none;
  }

  #donorText {
    position: absolute;
    bottom: -40px;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    font-family: "Comic Sans MS", sans-serif;
    font-size: 22px;
    text-shadow: 2px 2px 4px #000;
    z-index: 3;
  }
</style>
</head>
<body>
  <div class="overlay">
    <div class="char-wrapper">
      <img id="charImg" alt="Hero Image">
      <img id="borderImg" src="images/comic_border.png" alt="Border Image">
      <div id="donorText"></div>
    </div>
  </div>
// ðŸ§  Listen for updates from Firebase
console.log("Connecting to Firebase for overlay...");

onValue(ref(db, `/channels/${channelId}/current`), (snap) => {
  const cur = snap.val();
  console.log("Firebase snapshot received:", cur);

  if (!cur || !cur.hero) {
    console.log("No current hero â€” showing default image.");
    charImgEl.src = "images/pickahero.png";
    charImgEl.classList.add("default-placeholder");
    donorTextEl.textContent = "Pick a Hero!";
    return;
  }

  const heroName = cur.hero.trim();
  const donorName = cur.donor || "";
  const imageName = characters[heroName] || "pickahero.png";

  console.log("Now showing:", heroName, "by", donorName);
  charImgEl.classList.remove("default-placeholder");
  charImgEl.src = `images/${imageName}`;
  donorTextEl.textContent = donorName ? `Requested by ${donorName}` : "";
});

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-database.js";

    // --- Firebase config ---
    const firebaseConfig = {
      apiKey: "AIzaSyASjfLh3w3UQHRy1wvmWwD5ZfaXWjVYTnE",
      authDomain: "marvel-rivals-overlay-7f867.firebaseapp.com",
      databaseURL: "https://marvel-rivals-overlay-7f867-default-rtdb.firebaseio.com",
      projectId: "marvel-rivals-overlay-7f867",
      storageBucket: "marvel-rivals-overlay-7f867.appspot.com",
      messagingSenderId: "1078364810175",
      appId: "1:1078364810175:web:fac410007b70b65e348f0a"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const params = new URLSearchParams(location.search);
    const channelId = params.get("channel") || "demo";

    const charImgEl = document.getElementById("charImg");
    const donorTextEl = document.getElementById("donorText");

    const characters = {
      "Adam Warlock": "Adam Warlock.png", "Angela": "Angela.png", "Black Panther": "Black Panther.png",
      "Black Widow": "Black Widow.png", "Blade": "Blade.png", "Captain America": "Captain America.png",
      "Cloak & Dagger": "Cloak & Dagger.png", "Doctor Strange": "Doctor Strange.png", "Emma Frost": "Emma Frost.png",
      "Groot": "Groot.png", "Hawkeye": "Hawkeye.png", "Hela": "Hela.png", "Hulk": "Hulk.png",
      "Human Torch": "Human T
