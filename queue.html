<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hero Queue Manager</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background:#111; color:#fff; }
  input { margin: 5px; width: 200px; padding:5px; }
  button { margin: 5px; padding:5px 10px; background:#ffcc00; border:none; cursor:pointer; font-weight:bold; }
  button:hover { background:#ffaa00; }
  ul { list-style:none; padding-left:0; }
  li { margin:5px 0; }
</style>
</head>
<body>
<h1>Hero Queue Manager</h1>

<label>Add Hero to Queue:</label><br>
<input id="heroName" placeholder="Hero name">
<input id="heroImage" placeholder="Image filename (overlay folder)">
<button onclick="addHero()">Add Hero</button>
<button onclick="nextHero()">Next Hero</button>
<button onclick="clearQueue()">Clear Queue</button>

<h2>Current Queue:</h2>
<ul id="queueList"></ul>

<script>
let queue = [];
let overlayWindow = null;

// If overlay.html is open in another tab/window
function openOverlay() {
  if(!overlayWindow || overlayWindow.closed) {
    overlayWindow = window.open("overlay.html", "Overlay", "width=800,height=600");
  }
}

// Refresh queue display
function refreshQueue() {
  const list = document.getElementById("queueList");
  list.innerHTML = queue.map((q,i)=>`<li>${i+1}. ${q.name}</li>`).join("");
}

// Add hero to queue
function addHero() {
  const name = document.getElementById("heroName").value.trim();
  const image = document.getElementById("heroImage").value.trim();
  if(!name || !image) return alert("Both fields required!");
  queue.push({name, image});
  document.getElementById("heroName").value = "";
  document.getElementById("heroImage").value = "";
  refreshQueue();
}

// Move to next hero
function nextHero() {
  if(queue.length === 0) return alert("Queue is empty!");
  const next = queue.shift();
  refreshQueue();
  openOverlay(); // ensure overlay window is open
  overlayWindow.postMessage({hero: next.name}, "*");
}

// Clear the queue
function clearQueue() {
  queue = [];
  refreshQueue();
}

// Initial load
refreshQueue();
</script>
</body>
</html>
