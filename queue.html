<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hero Queue Manager</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    margin: 20px; 
    background:#111; 
    color:#fff; 
  }
  button { 
    margin: 5px; 
    padding:5px 10px; 
    background:#ffcc00; 
    border:none; 
    cursor:pointer; 
    font-weight:bold; 
  }
  button:hover { background:#ffaa00; }
  ul { list-style:none; padding-left:0; }
  li { margin:5px 0; }
</style>
</head>
<body>
<h1>Hero Queue Manager</h1>

<button onclick="refreshQueue()">Refresh Queue</button>
<button onclick="nextHero()">Next Hero</button>
<button onclick="clearQueue()">Clear Queue</button>

<h2>Current Queue:</h2>
<ul id="queueList"></ul>

<script>
let overlayWindow = null;

// Get queue from localStorage
function getQueue() {
  return JSON.parse(localStorage.getItem("heroQueue") || "[]");
}

// Save queue to localStorage
function saveQueue(queue) {
  localStorage.setItem("heroQueue", JSON.stringify(queue));
}

// Refresh queue display
function refreshQueue() {
  const queue = getQueue();
  const list = document.getElementById("queueList");
  list.innerHTML = queue.map((q,i)=>`<li>${i+1}. ${q}</li>`).join("");
}

// Open overlay window if needed
function openOverlay() {
  if(!overlayWindow || overlayWindow.closed) {
    overlayWindow = window.open("overlay.html", "Overlay", "width=800,height=600");
  }
}

// Move to next hero
function nextHero() {
  let queue = getQueue();
  if(queue.length === 0) return alert("Queue is empty!");
  const next = queue.shift();
  saveQueue(queue);
  refreshQueue();
  openOverlay();
  overlayWindow.postMessage({hero: next}, "*");
}

// Clear entire queue
function clearQueue() {
  saveQueue([]);
  refreshQueue();
}

// Initial load
refreshQueue();
</script>
</body>
</html>
