<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hero Queue Manager</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#111; color:#fff; }
    input, button { margin: 5px; padding: 8px; }
    button { background:#ffcc00; border:none; cursor:pointer; font-weight:bold; }
    button:hover { background:#ffaa00; }
    ul { list-style:none; padding-left:0; }
    li { margin:5px 0; }
  </style>
</head>
<body>
  <h1>Hero Queue Manager</h1>

  <!-- Manual add option -->
  <input id="heroName" placeholder="Hero name">
  <button onclick="addHero()">Add Hero</button>
  <button onclick="nextHero()">Next Hero</button>
  <button onclick="clearQueue()">Clear Queue</button>

  <!-- Test donation shortcut -->
  <button onclick="simulateDonation('Thor')">Simulate Thor</button>
  <button onclick="simulateDonation('Spider-Man')">Simulate Spider-Man</button>

  <h2>Current Queue:</h2>
  <ul id="queueList"></ul>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js"></script>

  <script>
    // âœ… Your Firebase setup (from your console)
    const firebaseConfig = {
      apiKey: "AIzaSyASjfLh3w3UQHRy1wvmWwD5ZfaXWjVYTnE",
      authDomain: "marvel-rivals-overlay-7f867.firebaseapp.com",
      databaseURL: "https://marvel-rivals-overlay-7f867-default-rtdb.firebaseio.com",
      projectId: "marvel-rivals-overlay-7f867",
      storageBucket: "marvel-rivals-overlay-7f867.appspot.com",
      messagingSenderId: "1078364810175",
      appId: "1:1078364810175:web:fac410007b70b65e348f0a"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Queue reference
    const queueRef = db.ref("heroQueue");

    // Listen for updates and refresh UI
    queueRef.on("value", (snapshot) => {
      const queue = snapshot.val() || [];
      refreshQueue(queue);
    });

    function refreshQueue(queue) {
      const list = document.getElementById("queueList");
      list.innerHTML = "";
      queue.forEach((hero, i) => {
        const li = document.createElement("li");
        li.textContent = `${i+1}. ${hero}`;
        list.appendChild(li);
      });
    }

    function addHero() {
      const name = document.getElementById("heroName").value.trim();
      if(!name) return;
      queueRef.once("value").then(snapshot => {
        const queue = snapshot.val() || [];
        queue.push(name);
        queueRef.set(queue);
      });
      document.getElementById("heroName").value = "";
    }

    function nextHero() {
      queueRef.once("value").then(snapshot => {
        const queue = snapshot.val() || [];
        if(queue.length === 0) return alert("Queue empty!");
        const next = queue.shift();
        queueRef.set(queue);
        // send message to overlay if needed
        window.postMessage({hero: next}, "*");
      });
    }

    function clearQueue() {
      queueRef.set([]);
    }

    // Fake donation button hook
    function simulateDonation(hero) {
      queueRef.once("value").then(snapshot => {
        const queue = snapshot.val() || [];
        queue.push(hero);
        queueRef.set(queue);
      });
    }
  </script>
</body>
</html>
